\chapter{Platform deployment and demonstrations}\label{H:platformDeploymentAndDemonstrations}

In order to demonstrate that the LiveMediaStreamer is a suitable tool to be used as the core framework of a cloud real-time media production platform it's required to showcase how it performs over the cloud. Therefore, it's important to demonstrate how it performs over the proposed architecture. And, previous chapters have implicitly helped to deploy and demonstrate it as shown in this chapter.

\section{Platform deployment}

In order to demonstrate how LMS suits to become a proper tool it's proposed to deploy two scenarios with different complex degrees.

\begin{itemize}
\item Isolated deployment \hfill

The main goal of this deployment is to demonstrate how LMS performs inside a Docker container by comparing its performance in the same O.S. but without running inside a container (i.e.: system installation).

In this scenario deployment LMS is configured to act as a transcoder service. This means applying one pipeline per stream type (i.e.: one video and one audio paths).

\item Generic scenario deployment \hfill

This scenario deployment aims to showcase a suitable and a as much generic as possible cloud real-time media production scenario. Therefore, it is proposed to configure LMS to receive eight streams (i.e.: four audio and four video streams), mix them and transmit them through RTP/RTSP. 
\end{itemize}

The environment where the deployments are done has the following characteristics:

\begin{table}[htb]
\caption{Deployment environment characteristics}
\begin{center}
\begin{tabular}{|c|c|}
\hline
{\bf Parameter} & {\bf Value} \\ \hline \hline
Hardware type        & Sony Vayo laptop \\ \hline
CPU        & Intel core i7-3632QM at 2.20 GHz  \\ \hline
RAM        & 6 GB (4 + 2) DDR3 \\ \hline
Operating system        & XUbuntu 14.04 - 64 bits (x86 64)  \\ \hline
Kernel version        & 3.13.0-55-generic  \\ \hline
Docker version        & 1.6.8  \\ \hline
\end{tabular}
\label{T:dec}
\end{center}
\end{table}

As seen, the deployment hasn't been carried out in any type of specific server or high performance cluster environment. This is mainly due to demonstrate flexibility on the deployment (i.e.: in a laptop) and portability of the platform (not only the cloud itself). And, all of these characteristics are achieved thanks to the performance of the platform itself and, concretely, the LMS (the core).

\subsection{Isolated demonstrations}

In order to demonstrate results of interest what is done is to implement a C/C++ script which configures the LMS framework as shown in figure \ref{F:idsc}. Moreover, in order to test how it performs the pipeline metrics are logged once per second (i.e.: pipeline losses and delay) and gathered by a Collectd client container properly configured. Then the Collectd client sends the data to the Graphite container. 

\begin{figure}[htb]
\begin{center}
\includegraphics[width=0.95\textwidth]{./images/isolatedScenario.png}
\caption{Isolated demonstration's scenario configuration}
\label{F:idsc}
\end{center}
\end{figure}

The Collectd client container, which reads from the volume where the LMS container is logging its metrics, is using the "tail" plugin (previously explained in chapter \ref{G:monitoringLayer}) with specific regular expressions in order to parse the metrics from the LMS logs (See APPENDIX XXX for this specific collectd configuration)

So, both isolated scenarios are the same but one is running the LMS on the system and the other is running the same configure LMS but containerized.

The other O.S. running is the one which runs the Docker container with the Collectd+Graphite tools. Moreover, this O.S. acts as the receiver of the transcoded streams through RTSP protocol.

Here the results of interest (check APPENDIX XXX for a detailed list) with both LMS deployments to compare:

\subsubsection{Containerized}

IMATGES

\subsubsection{System installation}

IMATGES



\subsection{Generic scenario demonstration}

This last scenario aims to be a generic and basic example demonstration of audio and video production in a cloud environment. Figure \ref{F:gdsc} showcases how the scenario is configured.

\begin{figure}[htb]
\begin{center}
\includegraphics[width=0.95\textwidth]{./images/genericScenario.png}
\caption{Generic demonstration's scenario configuration}
\label{F:gdsc}
\end{center}
\end{figure}

This demonstration is quite similar than the other but this time LMS is only configured and running inside a container. This LMS configuration is also a C/C++ script which congiures the framework as shown in figure \ref{F:gdsc} inside the LMS container, specifically.

So, in this case what is deployed is an audio and video mixer which receives four audio streams and four video streams encoded with OPUS and H264 codecs, respectively, which are streamed through its standard RTP encapsulation (i.e.: specific payload headers).

Regarding the audio mixing, all input streams are mixed with logarithmic mixing algorithm in order to not saturate the signal of the resulting audio stream. Then, regarding the video mixing, the HD inputs (i.e.: 1280x720 pixels of resolution) are mixed as shown next:

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=0.90\textwidth]{./images/outAVmix.png}
\caption{Output of the video mixing}
\label{F:outVMix}
\end{center}
\end{figure}

All video inputs are resized (through the previous resampler filter of the video mixer, see \ref{F:gdsc}) to the half of its size in order to fill into a resulting HD video stream as shown.

Here the results of interest (check APPENDIX XXX for a detailed list):

IMATGES